---
import type { ImageMetadata } from "astro";
import { Picture as AstroPicture } from "astro:assets";

interface Props {
  src: string;
  alt: string;
}

const props = Astro.props;
const imageLoaders = import.meta.glob<{ default: ImageMetadata }>("/res/**/*");
if (!imageLoaders[props.src]) {
  throw new Error(`${props.src} not found in /res folder!`);
}
const importedImage = imageLoaders[props.src]();
---

<>
  <AstroPicture
    src={importedImage}
    alt={props.alt}
    formats={["avif"]}
    densities={[0.5, 1, 1.5, 2]}
  />
</>
